(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d27b60cc"],{"0a74":function(t,e,a){},"9ed6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gramos-login"},[a("div",{staticClass:"container",staticStyle:{opacity:"85%"}},[a("div",{staticClass:"left"},[a("h1",[t._v("文物知识服务系统")]),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1),a("el-form-item",[a("el-input",{staticClass:"form-control form-control-lg",attrs:{type:"text",name:"pagerandom",id:"pagerandom",placeholder:"验证码"},model:{value:t.form.pagerandom,callback:function(e){t.$set(t.form,"pagerandom",e)},expression:"form.pagerandom"}},[a("span",{staticClass:"input-group-append",attrs:{slot:"append"},slot:"append"},[a("e-img",{staticStyle:{"min-width":"60px","min-height":"30px"},attrs:{src:t.captchUrl,onClick:"this.src='captcha.do?time='+new Date().getTime();",alt:"点击刷新"}})],1)])],1),a("el-form-item",[a("el-select",{staticClass:"form-control-lg",attrs:{id:"sys",name:"cx"},model:{value:t.form.cx,callback:function(e){t.$set(t.form,"cx",e)},expression:"form.cx"}},t._l(t.rules,(function(t){return a("el-option",{key:t,attrs:{value:t,label:t}})})),1)],1),a("el-form-item",[a("el-button",{staticStyle:{background:"#5B289E !important"},attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1),a("div",{staticClass:"right"})])])},r=[],s=(a("ac1f"),a("5319"),a("d708")),n=a.n(s),c=a("d722"),i={name:"gramos-login",data:function(){return{isLoaded:!0,setting:n.a,captchUrl:"",loading:!1,form:{username:"",pwd:"",cx:"管理员",pagerandom:"",a:"a"},rules:["管理员","用户"]}},watch:{},computed:{},methods:{login:function(){var t=this;this.loading=!0,this.$store.dispatch("user/login",this.form).then((function(e){if(t.loading=!1,e.code==c["a"].code.OK){t.$message.success("登录成功");var a=t.$route.query.redirect;a?t.$router.replace(a):t.$router.replace("/admin/sy")}else t.$message.error(e.msg);20==e.code&&t.loadCaptch()})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))},loadCaptch:function(){var t=this;c["a"].captch().then((function(e){console.log(e),t.form.captchToken=e.token,t.captchUrl=e.url}))}},created:function(){this.form.cx=this.rules[0],this.loadCaptch()},mounted:function(){var t=this;setTimeout((function(){t.isLoaded=!1}),500)},destroyed:function(){}},l=i,m=(a("dcff"),a("2877")),d=Object(m["a"])(l,o,r,!1,null,"50296ced",null);e["default"]=d.exports},dcff:function(t,e,a){"use strict";a("0a74")}}]);