{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'ChatGPT',\n  data() {\n    return {\n      question: \"\",\n      count: 0,\n      click: false,\n      chatRecord: [{\n        sender: \"小助手 :\",\n        message: \"您好！有什么需要向我提问的吗？\"\n      }]\n    };\n  },\n  methods: {\n    chat() {\n      this.click = true;\n      let url = 'http://127.0.0.1:8080/request?question=' + this.question;\n      //let url = 'https://chat-bot-29072-7-1316779917.sh.run.tcloudbase.com/request?question=' + this.question;\n      var you = {\n        sender: \"YOU:\",\n        message: this.question\n      };\n      var ai = {\n        sender: \"小助手:\",\n        message: \"\"\n      };\n      this.chatRecord.push(you);\n      this.chatRecord.push(ai);\n      this.question = \"\";\n      let es = new EventSource(url);\n      es.addEventListener('message', event => {\n        console.log(event.data);\n        this.count++;\n        if (this.count > 2) {\n          if (event.data.toString() === \"Answer Done!\") {\n            es.close();\n            this.count = 0;\n            this.click = false;\n          } else {\n            var ai = this.chatRecord[this.chatRecord.length - 1];\n            ai.message += event.data;\n            this.chatRecord[this.chatRecord.length - 1] = ai;\n          }\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","question","count","click","chatRecord","sender","message","methods","chat","url","you","ai","push","es","EventSource","addEventListener","event","console","log","toString","close","length"],"sources":["D:\\2023\\CNCulturalRelicOnline\\QASystem\\QASystem_code\\client\\src\\components\\ChatGPT.vue"],"sourcesContent":["<!-- views/chatgpt.vue -->\n\n<template>\n <div class=\"common-layout\">\n    <el-container style=\"height: fit-content;width: fit-content;\">\n    <!-- 顶部 -->\n      <el-header style=\"background-image: url(https://s1.ax1x.com/2022/12/30/pS9keyt.jpg);background-size:auto;margin-bottom: 5px;\">\n        <h1>智能问答小助手</h1>\n      </el-header>\n\n      <el-container>\n        <el-aside style=\"background-color: #FFDAB9;background-image: url(https://s1.ax1x.com/2022/12/30/pS9keyt.jpg);background-size: 530% 100% ;text-align: center;\">\n            <!-- 添加一个轮播图模块 -->\n            <el-carousel :interval=\"4000\" type=\"card\" height=\"200px\">\n                <el-carousel-item>\n                    <div style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QnsI.jpg);background-size: 100% 100%;\"></div>\n                </el-carousel-item>\n                <el-carousel-item>\n                    <div style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QmQA.jpg);background-size: 100% 100%;\"></div>\n                </el-carousel-item>\n                <el-carousel-item>\n                    <div style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QVRH.jpg);background-size: 100% 100%;\"></div>\n                </el-carousel-item>\n                <el-carousel-item>\n                    <div style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QEJe.jpg);background-size: 100% 100%;\"></div>\n                </el-carousel-item>\n            </el-carousel>\n\n            <div style=\"width: 15px;margin: 100px auto; font-size: 30px; \">\n                输入文字点击提交提问\n            </div>\n        </el-aside>-\n\n        <el-container>\n          <el-main style=\"background-color:#FFFFFF;height:500px;background-image: ;\">\n            <el-descriptions column=1 size=\"small\" border=\"true\" style=\"width:1000px;\" >\n                <div v-for=\"item in chatRecord\" :key=\"item\">\n                    <el-descriptions-item :label=\"item.sender\" label-align=\"center\" >\n                        <span v-html=item.message></span>\n                    </el-descriptions-item>\n                </div>\n            </el-descriptions>\n          </el-main>\n\n          <el-footer style=\"padding:10px;height:300px;\">\n           <div style=\"width:1000px; height: 200px;\">\n                <el-input v-model=\"question\" type=\"textarea\" placeholder=\"请输入你的问题\" :autosize=\"{ minRows: 5, maxRows: 7 }\" resize=\"none\" show-word-limit maxlength=\"300\"/>\n                <div style=\"text-align: right;\">\n                    <el-button color=\"#8d3d45\" @click=\"chat\" plain style=\"margin: 5px 0;width:100px;\" size=\"large\" :disabled=\"click\">提交</el-button>\n                </div>\n            </div>\n          </el-footer>\n        </el-container>\n      </el-container>\n\n    <el-footer style=\"background-color: #FFDAB9;background-image: url(https://s1.ax1x.com/2022/12/30/pS9keyt.jpg);background-size: 530% 100% ;text-align: center;\">\n        <h3>Powered by 2021-2022 Software Engineering</h3>\n    </el-footer>\n\n    </el-container>\n  </div>\n\n</template>\n\n<script>\n\nexport default {\n    name: 'ChatGPT',\n    data() {\n        return {\n            question: \"\",\n            count: 0,\n            click: false,\n            chatRecord: [{ sender: \"小助手 :\", message: \"您好！有什么需要向我提问的吗？\"}]\n        }\n    },\n    methods: {\n        chat() {\n            this.click=true;\n            let url = 'http://127.0.0.1:8080/request?question=' + this.question;\n            //let url = 'https://chat-bot-29072-7-1316779917.sh.run.tcloudbase.com/request?question=' + this.question;\n            var you = { sender: \"YOU:\", message: this.question };\n            var ai = { sender: \"小助手:\", message: \"\" };\n            this.chatRecord.push(you);\n            this.chatRecord.push(ai);\n            this.question = \"\";\n            let es = new EventSource(url);\n            es.addEventListener('message', event => {\n                console.log(event.data);\n                this.count++;\n                if (this.count > 2) {\n                    if (event.data.toString() === \"Answer Done!\") {\n                        es.close();\n                        this.count = 0;\n                        this.click = false;\n                    }else {\n                        var ai = this.chatRecord[this.chatRecord.length - 1]\n                        ai.message += event.data;\n                        this.chatRecord[this.chatRecord.length - 1] = ai;\n                    }\n                }\n            });\n        }\n    }\n}\n</script>"],"mappings":";AAkEA,eAAe;EACXA,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,CAAC;MACRC,KAAK,EAAE,KAAK;MACZC,UAAU,EAAE,CAAC;QAAEC,MAAM,EAAE,OAAO;QAAEC,OAAO,EAAE;MAAiB,CAAC;IAC/D;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,IAAIA,CAAA,EAAG;MACH,IAAI,CAACL,KAAK,GAAC,IAAI;MACf,IAAIM,GAAE,GAAI,yCAAwC,GAAI,IAAI,CAACR,QAAQ;MACnE;MACA,IAAIS,GAAE,GAAI;QAAEL,MAAM,EAAE,MAAM;QAAEC,OAAO,EAAE,IAAI,CAACL;MAAS,CAAC;MACpD,IAAIU,EAAC,GAAI;QAAEN,MAAM,EAAE,MAAM;QAAEC,OAAO,EAAE;MAAG,CAAC;MACxC,IAAI,CAACF,UAAU,CAACQ,IAAI,CAACF,GAAG,CAAC;MACzB,IAAI,CAACN,UAAU,CAACQ,IAAI,CAACD,EAAE,CAAC;MACxB,IAAI,CAACV,QAAO,GAAI,EAAE;MAClB,IAAIY,EAAC,GAAI,IAAIC,WAAW,CAACL,GAAG,CAAC;MAC7BI,EAAE,CAACE,gBAAgB,CAAC,SAAS,EAAEC,KAAI,IAAK;QACpCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAChB,IAAI,CAAC;QACvB,IAAI,CAACE,KAAK,EAAE;QACZ,IAAI,IAAI,CAACA,KAAI,GAAI,CAAC,EAAE;UAChB,IAAIc,KAAK,CAAChB,IAAI,CAACmB,QAAQ,EAAC,KAAM,cAAc,EAAE;YAC1CN,EAAE,CAACO,KAAK,EAAE;YACV,IAAI,CAAClB,KAAI,GAAI,CAAC;YACd,IAAI,CAACC,KAAI,GAAI,KAAK;UACtB,CAAC,MAAK;YACF,IAAIQ,EAAC,GAAI,IAAI,CAACP,UAAU,CAAC,IAAI,CAACA,UAAU,CAACiB,MAAK,GAAI,CAAC;YACnDV,EAAE,CAACL,OAAM,IAAKU,KAAK,CAAChB,IAAI;YACxB,IAAI,CAACI,UAAU,CAAC,IAAI,CAACA,UAAU,CAACiB,MAAK,GAAI,CAAC,IAAIV,EAAE;UACpD;QACJ;MACJ,CAAC,CAAC;IACN;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}