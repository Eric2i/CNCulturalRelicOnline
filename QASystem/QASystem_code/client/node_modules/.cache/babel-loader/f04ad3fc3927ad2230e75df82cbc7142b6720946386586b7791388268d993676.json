{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'ChatGPT',\n  data() {\n    return {\n      question: \"\",\n      count: 0,\n      click: false,\n      chatRecord: [{\n        sender: \"小助手 :\",\n        message: \"您好！我是知识问答系统认知小模型，能够学习和理解人类的语言，进行多轮对话，回答相关问题，高效便捷地帮助您获取信息、知识和灵感。\"\n      }]\n    };\n  },\n  methods: {\n    chat() {\n      this.click = true;\n      let url = 'http://127.0.0.1:8080/request?question=' + this.question;\n      //let url = 'https://chat-bot-29072-7-1316779917.sh.run.tcloudbase.com/request?question=' + this.question;\n      var you = {\n        sender: \"YOU:\",\n        message: this.question\n      };\n      var ai = {\n        sender: \"小助手:\",\n        message: \"\"\n      };\n      this.chatRecord.push(you);\n      this.chatRecord.push(ai);\n      this.question = \"\";\n      let es = new EventSource(url);\n      es.addEventListener('message', event => {\n        console.log(event.data);\n        this.count++;\n        if (this.count > 2) {\n          if (event.data.toString() === \"Answer Done!\") {\n            es.close();\n            this.count = 0;\n            this.click = false;\n          } else {\n            var ai = this.chatRecord[this.chatRecord.length - 1];\n            ai.message += event.data;\n            this.chatRecord[this.chatRecord.length - 1] = ai;\n          }\n        }\n      });\n    },\n    autoAnser1() {\n      this.click = true;\n      var you = {\n        sender: \"YOU:\",\n        message: \"介绍一下克利夫兰博物馆\"\n      };\n      var ai = {\n        sender: \"小助手:\",\n        message: \"\"\n      };\n      this.chatRecord.push(you);\n      this.chatRecord.push(ai);\n      this.question = \"\";\n      this.click = false;\n    }\n  }\n};","map":{"version":3,"names":["name","data","question","count","click","chatRecord","sender","message","methods","chat","url","you","ai","push","es","EventSource","addEventListener","event","console","log","toString","close","length","autoAnser1"],"sources":["D:\\2023\\CNCulturalRelicOnline\\QASystem\\QASystem_code\\client\\src\\components\\ChatGPT.vue"],"sourcesContent":["<!-- views/chatgpt.vue -->\n\n<template>\n    <div class=\"chatbot-layout\">\n        <el-container>\n            <!-- 顶部 -->\n            <el-header\n                style=\"background-image: url(https://s1.ax1x.com/2022/12/30/pS9keyt.jpg);background-size:auto;margin-bottom: 5px;\">\n                <h1>智能问答小助手</h1>\n            </el-header>\n\n            <el-container>\n                <el-aside\n                    style=\"background-image: url(https://s1.ax1x.com/2022/12/30/pS9keyt.jpg);background-size: 530% 100% ;text-align: center;\">\n                    <!-- 添加一个轮播图模块 -->\n                    <el-carousel :interval=\"4000\" type=\"card\" height=\"200px\">\n                        <el-carousel-item>\n                            <div\n                                style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QnsI.jpg);background-size: 100% 100%;\">\n                            </div>\n                        </el-carousel-item>\n                        <el-carousel-item>\n                            <div\n                                style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QmQA.jpg);background-size: 100% 100%;\">\n                            </div>\n                        </el-carousel-item>\n                        <el-carousel-item>\n                            <div\n                                style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QVRH.jpg);background-size: 100% 100%;\">\n                            </div>\n                        </el-carousel-item>\n                        <el-carousel-item>\n                            <div\n                                style=\"width: 150px;height: 150px;margin: 50px auto;background-image: url(https://s1.ax1x.com/2023/05/08/p90QEJe.jpg);background-size: 100% 100%;\">\n                            </div>\n                        </el-carousel-item>\n                    </el-carousel>\n\n                    <div style=\"width: 15px;margin: 100px auto; font-size: 30px; \">\n                        输入文字点击提交提问\n                    </div>\n                </el-aside>\n                <el-container>\n                    <el-main style=\"background-color:#FFFFFF;height:100%;background-image: ;align-items: stretch;box-sizing: border-box;\n                    display: flex;flex-basis: 0%;flex-direction: column;flex-grow: 1;flex-shrink: 1;overflow: hidden;position: relative;\">\n\n                        <el-descriptions column=1 size=\"small\" border=\"true\" style=\"width: 100%;\">\n                            <div v-for=\"item in chatRecord\" :key=\"item\">\n                                <el-descriptions-item :label=\"item.sender\" label-align=\"center\">\n                                    <span v-html=item.message></span>\n                                </el-descriptions-item>\n                            </div>\n                        </el-descriptions>\n\n                        <div style=\"bottom: 0px;box-sizing: border-box;display: block;left: 0px;padding-top: 8px;position: absolute;\n                                width: 100%;background-color: rgba(0, 0, 0, 0);background-image: linear-gradient();margin: auto;\">\n\n                            <div>\n                                <el-button type=\"primary\" @click=\"autoAnser1()\" style=\"margin: 5px 5px;width:200px;\"\n                                size=\"large\">介绍一下克利夫兰博物馆</el-button>\n                                <el-button type=\"primary\" @click=\"question='文物保护法是什么？'\" style=\"margin: 5px 5px;width:200px;\"\n                                size=\"large\">文物保护法是什么？</el-button>\n                                <el-button type=\"primary\" @click=\"question='文物保护法是什么？'\" style=\"margin: 5px 5px;width:200px;\"\n                                size=\"large\">文物保护法是什么？</el-button>\n                                <el-button type=\"primary\" @click=\"question='文物保护法是什么？'\" style=\"margin: 5px 5px;width:200px;\"\n                                size=\"large\">文物保护法是什么？</el-button>\n                            </div>\n\n                        <div style=\"width: 600px;margin: auto;\">\n\n                            <el-input v-model=\"question\" type=\"textarea\" placeholder=\"请输入你的问题\"\n                                :autosize=\"{ minRows: 1, maxRows: 7 }\" resize=\"none\" show-word-limit maxlength=\"300\" />\n                            <div style=\"text-align: right;\">\n                                <el-button color=\"#8d3d45\" @click=\"chat\" plain style=\"margin: 5px 0;width:100px;\"\n                                    size=\"large\" :disabled=\"click\">提交</el-button>\n                            </div>\n                        </div>\n                            \n\n                        </div>\n                    </el-main>\n                </el-container>\n            </el-container>\n        </el-container>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: 'ChatGPT',\n    data() {\n        return {\n            question: \"\",\n            count: 0,\n            click: false,\n            chatRecord: [{ sender: \"小助手 :\", message: \"您好！我是知识问答系统认知小模型，能够学习和理解人类的语言，进行多轮对话，回答相关问题，高效便捷地帮助您获取信息、知识和灵感。\" }]\n        }\n    },\n    methods: {\n        chat() {\n            this.click = true;\n            let url = 'http://127.0.0.1:8080/request?question=' + this.question;\n            //let url = 'https://chat-bot-29072-7-1316779917.sh.run.tcloudbase.com/request?question=' + this.question;\n            var you = { sender: \"YOU:\", message: this.question };\n            var ai = { sender: \"小助手:\", message: \"\" };\n            this.chatRecord.push(you);\n            this.chatRecord.push(ai);\n            this.question = \"\";\n            let es = new EventSource(url);\n            es.addEventListener('message', event => {\n                console.log(event.data);\n                this.count++;\n                if (this.count > 2) {\n                    if (event.data.toString() === \"Answer Done!\") {\n                        es.close();\n                        this.count = 0;\n                        this.click = false;\n                    } else {\n                        var ai = this.chatRecord[this.chatRecord.length - 1]\n                        ai.message += event.data;\n                        this.chatRecord[this.chatRecord.length - 1] = ai;\n                    }\n                }\n            });\n        },\n        autoAnser1() {\n            this.click = true;\n            var you = { sender: \"YOU:\", message: \"介绍一下克利夫兰博物馆\" };\n            var ai = { sender: \"小助手:\", message: \"\" };\n            this.chatRecord.push(you);\n            this.chatRecord.push(ai);\n            this.question = \"\";\n            this.click = false;\n        }\n    }\n}\n</script>"],"mappings":";AAyFA,eAAe;EACXA,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,CAAC;MACRC,KAAK,EAAE,KAAK;MACZC,UAAU,EAAE,CAAC;QAAEC,MAAM,EAAE,OAAO;QAAEC,OAAO,EAAE;MAAkE,CAAC;IAChH;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,IAAIA,CAAA,EAAG;MACH,IAAI,CAACL,KAAI,GAAI,IAAI;MACjB,IAAIM,GAAE,GAAI,yCAAwC,GAAI,IAAI,CAACR,QAAQ;MACnE;MACA,IAAIS,GAAE,GAAI;QAAEL,MAAM,EAAE,MAAM;QAAEC,OAAO,EAAE,IAAI,CAACL;MAAS,CAAC;MACpD,IAAIU,EAAC,GAAI;QAAEN,MAAM,EAAE,MAAM;QAAEC,OAAO,EAAE;MAAG,CAAC;MACxC,IAAI,CAACF,UAAU,CAACQ,IAAI,CAACF,GAAG,CAAC;MACzB,IAAI,CAACN,UAAU,CAACQ,IAAI,CAACD,EAAE,CAAC;MACxB,IAAI,CAACV,QAAO,GAAI,EAAE;MAClB,IAAIY,EAAC,GAAI,IAAIC,WAAW,CAACL,GAAG,CAAC;MAC7BI,EAAE,CAACE,gBAAgB,CAAC,SAAS,EAAEC,KAAI,IAAK;QACpCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAChB,IAAI,CAAC;QACvB,IAAI,CAACE,KAAK,EAAE;QACZ,IAAI,IAAI,CAACA,KAAI,GAAI,CAAC,EAAE;UAChB,IAAIc,KAAK,CAAChB,IAAI,CAACmB,QAAQ,EAAC,KAAM,cAAc,EAAE;YAC1CN,EAAE,CAACO,KAAK,EAAE;YACV,IAAI,CAAClB,KAAI,GAAI,CAAC;YACd,IAAI,CAACC,KAAI,GAAI,KAAK;UACtB,OAAO;YACH,IAAIQ,EAAC,GAAI,IAAI,CAACP,UAAU,CAAC,IAAI,CAACA,UAAU,CAACiB,MAAK,GAAI,CAAC;YACnDV,EAAE,CAACL,OAAM,IAAKU,KAAK,CAAChB,IAAI;YACxB,IAAI,CAACI,UAAU,CAAC,IAAI,CAACA,UAAU,CAACiB,MAAK,GAAI,CAAC,IAAIV,EAAE;UACpD;QACJ;MACJ,CAAC,CAAC;IACN,CAAC;IACDW,UAAUA,CAAA,EAAG;MACT,IAAI,CAACnB,KAAI,GAAI,IAAI;MACjB,IAAIO,GAAE,GAAI;QAAEL,MAAM,EAAE,MAAM;QAAEC,OAAO,EAAE;MAAc,CAAC;MACpD,IAAIK,EAAC,GAAI;QAAEN,MAAM,EAAE,MAAM;QAAEC,OAAO,EAAE;MAAG,CAAC;MACxC,IAAI,CAACF,UAAU,CAACQ,IAAI,CAACF,GAAG,CAAC;MACzB,IAAI,CAACN,UAAU,CAACQ,IAAI,CAACD,EAAE,CAAC;MACxB,IAAI,CAACV,QAAO,GAAI,EAAE;MAClB,IAAI,CAACE,KAAI,GAAI,KAAK;IACtB;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}